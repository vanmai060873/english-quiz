<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>English Quiz</title>
<style>
body { font-family: Arial; padding: 20px; background:#f2f2f2; }
h1 { text-align:center; }
.question { background:white; padding:15px; margin:10px 0; border-radius:10px; }
button { padding:10px 20px; font-size:16px; margin-top:20px; }
#result { font-size:20px; font-weight:bold; margin-top:20px; }
</style>
</head>
<body>

<h1>English Quiz Test</h1>

<div id="quiz"></div>

<button onclick="submitQuiz()">Submit</button>

<div id="result"></div>

<script>
let correctAnswers = {};

fetch("questions.txt")
.then(response => response.text())
.then(data => {
    let blocks = data.split(/\n\s*\n/);
    let quizDiv = document.getElementById("quiz");

    blocks.forEach((block, index) => {
        let lines = block.trim().split("\n");

        if (lines.length >= 6) {
            let questionText = lines[0];
            let options = lines.slice(1,5);
            let answerLine = lines[5];

            let questionNumber = "q" + (index + 1);
            correctAnswers[questionNumber] = answerLine.replace("ANSWER:", "").trim();

            let div = document.createElement("div");
            div.className = "question";

            let html = `<p>${questionText}</p>`;

            options.forEach(opt => {
                let letter = opt.charAt(0);
                html += `<input type="radio" name="${questionNumber}" value="${letter}"> ${opt}<br>`;
            });

            div.innerHTML = html;
            quizDiv.appendChild(div);
        }
    });
});

function submitQuiz() {
    let score = 0;

    for (let key in correctAnswers) {
        let selected = document.querySelector(`input[name="${key}"]:checked`);
        if (selected && selected.value === correctAnswers[key]) {
            score++;
        }
    }

    document.getElementById("result").innerHTML =
        "Your score: " + score + " / " + Object.keys(correctAnswers).length;
}
</script>

</body>
</html>
